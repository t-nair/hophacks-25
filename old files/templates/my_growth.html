<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Growth</title>
    <link rel="stylesheet" href="../static/styles/style.css">
</head>
<body>
    <!-- Container -->
<div id="calendar-heatmap"></div>

<style>
  
</style>

<script>
  function renderHeatmap(year, colors, elementId) {
    const container = document.getElementById(elementId);
    if (!container) return;

    container.innerHTML = ""; // clear existing if rerender
    container.className = "heatmap-container";

    const title = document.createElement("h2");
    title.className = "heatmap-title";
    title.textContent = `${year} Heatmap`;
    container.appendChild(title);

    const heatmap = document.createElement("div");
    heatmap.className = "heatmap";

    const start = new Date(year, 0, 1);
    const end = new Date(year, 11, 31);
    const days = [];

    for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {
      days.push(new Date(d));
    }

    const weeks = [];
    let week = [];

    days.forEach(day => {
      if (day.getDay() === 0 && week.length > 0) {
        weeks.push(week);
        week = [];
      }
      week.push(day);
    });
    if (week.length > 0) weeks.push(week);

    weeks.forEach(week => {
      const col = document.createElement("div");
      col.className = "week";

      for (let i = 0; i < 7; i++) {
        const day = week.find(d => d.getDay() === i);
        const div = document.createElement("div");
        div.className = "day";
        if (day) {
          const dateStr = day.toISOString().slice(0,10);
          div.style.backgroundColor = colors[dateStr] || "#e5e7eb";
          div.title = dateStr;
        }
        col.appendChild(div);
      }
      heatmap.appendChild(col);
    });

    container.appendChild(heatmap);
  }

  // Example usage
  const colors = {
    "2025-01-01": "rgb(220,38,38)",
    "2025-01-02": "rgb(34,197,94)",
    "2025-02-14": "rgb(59,130,246)"
  };

  renderHeatmap(2025, colors, "calendar-heatmap");
</script>

</body>
</html>